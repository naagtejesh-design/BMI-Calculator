<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI Calculator</title>
<link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container">
        <h2>BMI Calculator</h2>
        
        <label>Gender:</label>
        <div class="gender-selection">
            <label class="radio-label">
                <input type="radio" name="gender" value="male" checked>
                <span>Male</span>
            </label>
            <label class="radio-label">
                <input type="radio" name="gender" value="female">
                <span>Female</span>
            </label>
        </div>
        
        <label for="age">Age (years):</label>
        <input type="number" id="age" placeholder="Enter age" min="10" max="120" />
        
        <label for="height">Height (cm):</label>
        <input type="number" id="height" placeholder="Enter height" />
        
        <label for="weight">Weight (kg):</label>
        <input type="number" id="weight" placeholder="Enter weight" />
        
        <label for="activity">Activity Level:</label>
        <select id="activity" class="activity-select">
            <option value="1.2">Sedentary (little or no exercise)</option>
            <option value="1.375">Lightly active (exercise 1-3 days/week)</option>
            <option value="1.55" selected>Moderately active (exercise 3-5 days/week)</option>
            <option value="1.725">Very active (exercise 6-7 days/week)</option>
            <option value="1.9">Extra active (very intense exercise daily)</option>
        </select>
        
        <button onclick="calculateBMI()">Calculate BMI</button>

        <div class="gauge-container" id="gaugeContainer" style="display: none;">
            <svg viewBox="0 0 200 120" class="gauge">
                <defs>
                    <linearGradient id="underweight" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#5dade2;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="normal" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#2ecc71;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#58d68d;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="overweight" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#f5b041;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="obese" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#ec7063;stop-opacity:1" />
                    </linearGradient>
                </defs>
                
                <path d="M 20 100 A 80 80 0 0 1 68 32" fill="none" stroke="url(#underweight)" stroke-width="15"/>
                <path d="M 68 32 A 80 80 0 0 1 132 32" fill="none" stroke="url(#normal)" stroke-width="15"/>
                <path d="M 132 32 A 80 80 0 0 1 180 100" fill="none" stroke="url(#overweight)" stroke-width="15"/>
                <path d="M 180 100 A 80 80 0 0 1 185 110" fill="none" stroke="url(#obese)" stroke-width="15"/>
                
                <text x="25" y="110" font-size="10" fill="#555">15</text>
                <text x="60" y="25" font-size="10" fill="#555">18.5</text>
                <text x="95" y="15" font-size="10" fill="#555">25</text>
                <text x="135" y="25" font-size="10" fill="#555">30</text>
                <text x="170" y="110" font-size="10" fill="#555">40</text>
                
                <line id="needle" x1="100" y1="100" x2="100" y2="30" stroke="#333" stroke-width="3" stroke-linecap="round" style="transform-origin: 100px 100px; transition: transform 1s ease-out;"/>
                <circle cx="100" cy="100" r="8" fill="#333"/>
                <circle cx="100" cy="100" r="4" fill="#fff"/>
            </svg>
            <div class="bmi-value" id="bmiValue">--</div>
            <div class="bmi-category" id="bmiCategory">Calculate your BMI</div>
        </div>

        <div class="calorie-info" id="calorieInfo" style="display: none;">
            <h3>üìä Recommended Daily Calorie Intake</h3>
            <div class="calorie-details" id="calorieDetails"></div>
        </div>

        <div class="result" id="result"></div>
        <div class="error" id="error"></div>
    </div>

    <div class="info-container">
        <div class="info-section">
            <h3>What is BMI?</h3>
            <p>Body Mass Index (BMI) is a simple calculation using a person's height and weight. The formula is BMI = kg/m¬≤ where kg is your weight in kilograms and m¬≤ is your height in meters squared.</p>
        </div>
        
        <div class="info-section">
            <h3>Why is BMI Important?</h3>
            <p>BMI is a useful indicator of whether you are at a healthy weight for your height. Maintaining a healthy weight can help reduce the risk of chronic diseases such as heart disease, diabetes, and certain cancers.</p>
        </div>
        
        <div class="info-section">
            <h3>BMI Categories</h3>
            <div class="bmi-ranges">
                <div class="range-item">
                    <div class="range-color underweight-color"></div>
                    <div class="range-info">
                        <strong>Underweight:</strong> BMI less than 18.5
                    </div>
                </div>
                <div class="range-item">
                    <div class="range-color normal-color"></div>
                    <div class="range-info">
                        <strong>Normal weight:</strong> BMI 18.5 - 24.9
                    </div>
                </div>
                <div class="range-item">
                    <div class="range-color overweight-color"></div>
                    <div class="range-info">
                        <strong>Overweight:</strong> BMI 25 - 29.9
                    </div>
                </div>
                <div class="range-item">
                    <div class="range-color obese-color"></div>
                    <div class="range-info">
                        <strong>Obese:</strong> BMI 30 or greater
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-section">
            <h3>Understanding Calorie Recommendations</h3>
            <p>Daily calorie needs vary based on gender, age, weight, height, and activity level. Our calculator uses the Mifflin-St Jeor equation to estimate your Basal Metabolic Rate (BMR) and adjusts it based on your activity level and BMI goals.</p>
            <ul class="info-list">
                <li><strong>Maintenance Calories:</strong> To maintain your current weight</li>
                <li><strong>Weight Loss:</strong> A 500-calorie daily deficit leads to approximately 0.5 kg weight loss per week</li>
                <li><strong>Weight Gain:</strong> A 300-500 calorie surplus helps healthy weight gain</li>
                <li><strong>Gender Differences:</strong> Males typically have higher calorie needs due to greater muscle mass</li>
            </ul>
        </div>
        
        <div class="info-section">
            <h3>Important Note</h3>
            <p>While BMI is a useful screening tool, it doesn't directly measure body fat or muscle mass. Athletes with high muscle mass may have a high BMI but low body fat. Calorie recommendations are estimates and individual needs may vary. Always consult healthcare professionals for personalized health assessments.</p>
        </div>
    </div>

    <script>
      function calculateBMI() {
        const height = parseFloat(document.getElementById('height').value);
        const weight = parseFloat(document.getElementById('weight').value);
        const age = parseFloat(document.getElementById('age').value);
        const gender = document.querySelector('input[name="gender"]:checked').value;
        const activityLevel = parseFloat(document.getElementById('activity').value);
        
        const result = document.getElementById('result');
        const error = document.getElementById('error');
        const gaugeContainer = document.getElementById('gaugeContainer');
        const calorieInfo = document.getElementById('calorieInfo');
        const calorieDetails = document.getElementById('calorieDetails');
        const needle = document.getElementById('needle');
        const bmiValue = document.getElementById('bmiValue');
        const bmiCategory = document.getElementById('bmiCategory');

        result.textContent = '';
        error.textContent = '';

        if (!height || !weight || height <= 0 || weight <= 0) {
          error.textContent = '‚ö†Ô∏è Please enter valid height and weight.';
          gaugeContainer.style.display = 'none';
          calorieInfo.style.display = 'none';
          return;
        }

        if (!age || age < 10 || age > 120) {
          error.textContent = '‚ö†Ô∏è Please enter a valid age between 10 and 120.';
          gaugeContainer.style.display = 'none';
          calorieInfo.style.display = 'none';
          return;
        }

        const bmi = (weight / ((height / 100) ** 2)).toFixed(1);
        let message = `Your BMI is ${bmi}. `;
        let category = '';
        let needleAngle = 0;
        
        const minHealthyBMI = 18.5;
        const maxHealthyBMI = 24.9;
        const heightMeters = height / 100;
        const minWeight = (minHealthyBMI * (heightMeters ** 2)).toFixed(1);
        const maxWeight = (maxHealthyBMI * (heightMeters ** 2)).toFixed(1);

        // Calculate BMR using Mifflin-St Jeor Equation
        let bmr;
        if (gender === 'male') {
          bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
        } else {
          bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
        }

        // Calculate TDEE (Total Daily Energy Expenditure)
        const tdee = Math.round(bmr * activityLevel);
        
        let maintenanceCalories = tdee;
        let goalCalories = tdee;
        let calorieGoal = '';

        // Calculate needle angle based on BMI
        let bmiForAngle = Math.max(15, Math.min(40, bmi));
        needleAngle = ((bmiForAngle - 15) / 25) * 180 - 90;

        if (bmi < 18.5) {
          const gain = (minWeight - weight).toFixed(1);
          message += `You're underweight. You need to gain about ${gain} kg to reach a healthy BMI.`;
          category = 'Underweight';
          goalCalories = tdee + 400;
          calorieGoal = 'gain weight';
        } else if (bmi >= 18.5 && bmi < 25) {
          message += "‚úÖ You're in the healthy BMI range!";
          category = 'Normal Weight';
          goalCalories = tdee;
          calorieGoal = 'maintain weight';
        } else if (bmi >= 25 && bmi < 30) {
          const lose = (weight - maxWeight).toFixed(1);
          message += `You're overweight. You need to lose about ${lose} kg to reach a healthy BMI.`;
          category = 'Overweight';
          goalCalories = tdee - 500;
          calorieGoal = 'lose weight';
        } else {
          const lose = (weight - maxWeight).toFixed(1);
          message += `You're obese. You need to lose about ${lose} kg to reach a healthy BMI.`;
          category = 'Obese';
          goalCalories = tdee - 600;
          calorieGoal = 'lose weight';
        }

        // Ensure minimum calorie intake
        goalCalories = Math.max(goalCalories, gender === 'male' ? 1500 : 1200);

        // Display calorie information
        let calorieHTML = `
          <div class="calorie-row">
            <span class="calorie-label">Your Maintenance Calories:</span>
            <span class="calorie-value">${maintenanceCalories} cal/day</span>
          </div>
          <div class="calorie-row highlight">
            <span class="calorie-label">Recommended to ${calorieGoal}:</span>
            <span class="calorie-value">${goalCalories} cal/day</span>
          </div>
          <div class="calorie-note">
            <strong>Gender:</strong> ${gender.charAt(0).toUpperCase() + gender.slice(1)} | 
            <strong>Age:</strong> ${age} years | 
            <strong>Activity:</strong> ${document.getElementById('activity').options[document.getElementById('activity').selectedIndex].text.split('(')[0].trim()}
          </div>
        `;

        if (category === 'Underweight') {
          calorieHTML += `<div class="calorie-tip">üí° <strong>Tip:</strong> Increase calorie intake gradually with nutrient-dense foods to gain weight healthily.</div>`;
        } else if (category === 'Overweight' || category === 'Obese') {
          calorieHTML += `<div class="calorie-tip">üí° <strong>Tip:</strong> Create a moderate calorie deficit combined with regular exercise for sustainable weight loss.</div>`;
        } else {
          calorieHTML += `<div class="calorie-tip">üí° <strong>Tip:</strong> Maintain your healthy weight by balancing calorie intake with physical activity.</div>`;
        }

        calorieDetails.innerHTML = calorieHTML;
        calorieInfo.style.display = 'block';

        // Show gauge and animate needle
        gaugeContainer.style.display = 'block';
        bmiValue.textContent = bmi;
        bmiCategory.textContent = category;
        
        // Reset needle first
        needle.style.transform = 'rotate(-90deg)';
        
        // Animate needle after a brief delay
        setTimeout(() => {
          needle.style.transform = `rotate(${needleAngle}deg)`;
        }, 100);

        result.textContent = message;
      }
    </script>
</body>
</html>